<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galderma FAS</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="wrapper">
        <div class="assessment">
            <img src="img/image1.png" class="img" />
            <div class="content">
                <p class="a">A</p>
                <p class="assess">Assessment</p>
                <p class="body">Start from your patients’ concerns and assess their needs accurately with the Galderma
                    Facial Assessment Scale (FAS). Made of five facets, the FAS ensures that all aspects of the
                    patient’s face are evaluated during the consultation.
                </p>
                <ul class="list">
                    <li>SKIN QUALITY</li>
                    <li>FACIAL SHAPE</li>
                    <li>FACIAL PROPORTION & CONTOUR</li>
                    <li>FACIAL SYMMETRY</li>
                    <li>ANIMATION & EMOTIONAL EXPRESSION</li>
                </ul>
                <p class="body">These five facets can be graded to identify treatment priorities that can be visualised
                    by the patient.</p>
                <div class="ImgTxt sB">
                    <img src="img/image2.png" alt="fas" width="75" />
                    <a href="#fas">Click to go to the Galderma Facial Assessment Scale (FAS)</a>
                </div>
            </div>
        </div>
        <div class="consultation">
            <div class="title sB">The Patient Consultation Process</div>
            <div class="process-container">
                <div class="process">
                    <div class="header">
                        <p class="sB">Befor consultation</p>
                    </div>
                    <div class="steps">
                        <div>
                            <img src="img/pen.png" />
                            <div>
                                <span>1.</span>
                                <p>Share the pre-consultation questionnaire with your patient to fill in.</p>
                            </div>
                            <a class="download" href="https://www.igain.galderma.com.au/content-resources/168"
                                target="_blank"><img src="img/download.png" />Download PDF Questionnaire</a>
                        </div>
                        <div>
                            <img src="img/search.png" />
                            <div><span>2.</span>
                                <p>Analyse the pre-consultation questionnaire.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="process">
                    <div class="header">
                        <p class="sB">During consultation</p>
                    </div>
                    <div class="steps">
                        <div>
                            <img src="img/fas.png" />
                            <div>
                                <span>3.</span>
                                <p>Fill out the Facial Assessment Scale together with your patient. Scroll down to
                                    access the digital FAS.</p>
                            </div>
                            <a class="download" href="https://www.igain.galderma.com.au/search?keys=patient+assessment"
                                target="_blank"><img src="img/download.png" />Download PDF FAS for offline
                                use</a>
                        </div>
                        <div>
                            <img src="img/hit.png" style="height: 24px;      margin-top: 6px;" />
                            <div style="margin-top:24px;">
                                <span>4.</span>
                                <p>Develop a treatment plan by selecting suitable products from the Galderma Portfolio
                                    to create a Holistic Individualised Treatment (HIT).
                                </p>
                            </div>
                            <a class="download" href=""><img src="img/download.png" />Download PDF
                                HIT™ Brochure</a>
                        </div>
                    </div>
                </div>
                <div class="process">
                    <div class="header">
                        <p class="sB">After consultation</p>
                    </div>
                    <div class="steps">
                        <div>
                            <img src="img/note.png" />
                            <div>
                                <span>5.</span>
                                <p>Share the treatment
                                    plan with your patient after the consultation.Scroll down to access the digital
                                    treatment plan.
                                </p>
                            </div>
                        </div>
                        <div>
                            <img src="img/face.png" />
                            <div>
                                <span>6.</span>
                                <p>Treat and follow-up using the information gathered prior and during consultation.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="facets">
            <div class="title sB">The Five Facets of Facial Assessment</div>
            <div class="facets-container">
                <div class="hex">
                    <div class="hex-content">
                        <p class="hex-title sB">Skin quality</p>
                        <p class="hext-txt sL">Good skin quality is a key component of beauty and is assessed for loss
                            of radiance/glow and firmness</p>
                        <div>
                            <img src="img/face1.png" />
                            <img src="img/face2.png" />
                        </div>
                        <div class="popup_main">
                            <img src="img/plus.png" class="plus open_popup" />
                            <div class="popup_body">
                                <div class="popup_back"></div>
                                <div class="popup_contain">
                                    <div class="popup_close">x</div>
                                    <div class="popup-content">
                                        <img src="img/skin_quality_2x.jpg" class="popup-img" />
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="hex">
                    <div class="hex-content">
                        <p class="hex-title sB">Facial shape</p>
                        <p class="hext-txt sL">Age-related changes in facial shape caused by loss of structural support
                            lead to volume loss and sagging.1 </p>
                        <div>
                            <img src="img/face3.png" />
                            <img src="img/face4.png" />
                        </div>
                        <div class="popup_main">
                            <img src="img/plus.png" class="plus open_popup" />
                            <div class="popup_body">
                                <div class="popup_back"></div>
                                <div class="popup_contain">
                                    <div class="popup_close">x</div>
                                    <div class="popup-content">
                                        <img src="img/facial_shape_2x.jpg" class="popup-img" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="hex">
                    <div class="hex-content">
                        <p class="hex-title sB">Facial proportion
                            and contour</p>
                        <p class="hext-txt sL">Proportions and contours are influenced by the size and projection of
                            facial features.2 Evaluate facial angles to identify imbalance.</p>
                        <div>
                            <img src="img/face5.png" />
                            <img src="img/face6.png" />
                        </div>
                        <div class="popup_main">
                            <img src="img/plus.png" class="plus open_popup" />
                            <div class="popup_body">
                                <div class="popup_back"></div>
                                <div class="popup_contain">
                                    <div class="popup_close">x</div>
                                    <div class="popup-content">
                                        <img src="img/facial_proportions_2x.jpg" class="popup-img" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="hex">
                    <div class="hex-content">
                        <p class="hex-title sB">Facial symmetry</p>
                        <p class="hext-txt sL">Perfect facial symmetry rarely occurs. Asymmetry should be recognised
                            before injectable treatments are administered.</p>
                        <div>
                            <img src="img/face7.png" />
                            <img src="img/face8.png" />
                        </div>
                        <div class="popup_main">
                            <img src="img/plus.png" class="plus open_popup" />
                            <div class="popup_body">
                                <div class="popup_back"></div>
                                <div class="popup_contain">
                                    <div class="popup_close">x</div>
                                    <div class="popup-content">
                                        <img src="img/symmetry_2x.jpg" class="popup-img" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="hex">
                    <div class="hex-content">
                        <p class="hex-title sB">Animation and emotional expression</p>
                        <p class="hext-txt sL">Animation and emotional expression can be assessed by examining the
                            presence of static and dynamic lines. </p>
                        <div>
                            <img src="img/face9.png" />
                            <img src="img/face10.png" />
                        </div>
                        <div class="popup_main">
                            <img src="img/plus.png" class="plus open_popup" />
                            <div class="popup_body">
                                <div class="popup_back"></div>
                                <div class="popup_contain">
                                    <div class="popup_close">x</div>
                                    <div class="popup-content">
                                        <img src="img/expression_2x.jpg" class="popup-img" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <p class="small-txt">1. Farkas JP, et al. Plast Reconstr Surg Glob Open 2013;1(1):e8–15. 2. Milutinovic J,
                et al. Sci World J 2014; DOI: 10.1155/2014/428250.</p>
        </div>
        <div id="contentToPrint">
            <div class="fas">
                <div class="title sB">Galderma Facial Assessment Scale (FAS)</div>
                <form class="fas-form">
                    <div>
                        <input type="text" class="input" id="pname" name="pname" />
                        <label class="sB" for="pname">PATIENT NAME</label>
                    </div>
                    <div>
                        <input type="text" class="input" id="contact" name="contact" />
                        <label class="sB" for="contact">CLINIC CONTACT</label>
                    </div>
                    <div>
                        <input type="date" class="input" id="date" name="date" />
                        <label class="sB" for="date">DATE</label>
                    </div>
                </form>
                <div class="fas-content">
                    <div class="fas-use">
                        <p>How to use the Facial Assessment Scale</p>
                        <p>With your patient, grade the five facets of facial assessment according to the Severity
                            Evaluation Scale below</p>
                        <img src="img/evaluation-scale.png" />
                        <img src="img/fas-use.png" />
                    </div>
                    <div id="fas" class="fas-tool">
                        <canvas id="myCanvas" style="border:1px solid #d3d3d3;">
                            Your browser does not support the HTML5 canvas tag.</canvas>
                    </div>
                    <div class="evaluation">
                        <canvas id="evaluationCanvas" width="200" height="150"
                            style="border:1px solid #d3d3d3;background-color: #F2F5FC;">
                            Your browser does not support the HTML5 canvas tag.</canvas>
                    </div>
                </div>
            </div>
            <div class="fas-notes">
                <div class="title sB">Facial Assessment Notes</div>
                <div class="fas-notes-container">
                    <div class="hideMob">
                        <img src="img/image2.png" />
                        <a href="#fas" class="sB">Back to FAS</a>
                    </div>
                    <div>
                        <form class="facial-notes">
                            <div class="flex">
                                <div class="img-container">
                                    <img src="img/face1.png" />
                                    <img src="img/face2.png" />
                                </div>
                                <div class="fas-notes-form-fields">
                                    <label class="sB">Skin quality</label>
                                    <textarea class="textarea" placeholder="Enter patient notes here"></textarea>
                                    <span></span>
                                </div>
                            </div>
                            <div class="flex">
                                <div class="img-container">
                                    <img src="img/face3.png" />
                                    <img src="img/face4.png" />
                                </div>
                                <div class="fas-notes-form-fields">
                                    <label class="sB">Facial shape</label>
                                    <textarea class="textarea" placeholder="Enter patient notes here"></textarea>
                                    <span></span>
                                </div>
                            </div>
                            <div class="flex">
                                <div class="img-container">
                                    <img src="img/face5.png" />
                                    <img src="img/face6.png" />
                                </div>
                                <div class="fas-notes-form-fields">
                                    <label class="sB">Facial proportion and contour</label>
                                    <textarea class="textarea" placeholder="Enter patient notes here"></textarea>
                                    <span></span>
                                </div>
                            </div>
                            <div class="flex">
                                <div class="img-container">
                                    <img src="img/face7.png" />
                                    <img src="img/face8.png" />
                                </div>
                                <div class="fas-notes-form-fields">
                                    <label class="sB">Facial symmetry </label>
                                    <textarea class="textarea" placeholder="Enter patient notes here"></textarea>
                                    <span></span>
                                </div>
                            </div>
                            <div class="flex">
                                <div class="img-container">
                                    <img src="img/face9.png" />
                                    <img src="img/face10.png" />
                                </div>
                                <div class="fas-notes-form-fields">
                                    <label class="sB">Animation and emotional expression</label>
                                    <textarea class="textarea" placeholder="Enter patient notes here"></textarea>
                                    <span></span>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="treatment-plan">
                <div class="title sB">Treatment Plan</div>
                <div class="fas-notes-container">
                    <div class="hideMob">
                        <img src="img/image2.png" />
                        <a href="#fas" class="sB">Back to FAS</a>
                    </div>
                    <div>
                        <div class="grid-plan">
                            <p>DATE/FREQUENCY</p>
                            <p>AREA</p>
                            <p>TREATMENT</p>
                            <p>COST GUIDE</p>
                        </div>
                        <div class="grid-plan">
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                        </div>
                        <div class="grid-plan">
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                        </div>
                        <div class="grid-plan">
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                        </div>
                        <div class="grid-plan">
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                        </div>
                        <div class="grid-plan">
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                            <textarea type="text" class="textarea"></textarea>
                        </div>
                        <div class="notes patient-notes">
                            <p class="sB">Notes</p>
                            <textarea class="textarea"></textarea>
                            <span></span>
                        </div>
                        <div class="download-container ignore">
                            <div class="btn-container">
                                <div class="grid-container">
                                    <button class="btn-download" onclick="downloadPDF();"></button>
                                    <p>Download a PDF of the results of the Facial Assessment and Treatment Plan.</p>
                                </div>
                                <div class="grid-container">
                                    <a href="mailto:?subject=Galderma Facial Assessment Scale – Treatment Plan"><button
                                            class="btn-email"></button></a>
                                    <p>After downloading the PDF you can email a record to your patient. </p>
                                </div>
                            </div>
                            <div>
                                <div class="popup_main">
                                    <button class="btn-start open_popup" style="width: 180px;"></button>
                                    <div class="popup_body">
                                        <div class="popup_back"></div>
                                        <div class="popup_contain popup-alt-contain">
                                            <div class="popup_close">x</div>
                                            <div class="popup-content">
                                                <p>Reload FAS?</p>
                                                <p>Changes you made will not be saved</p>
                                                <div class="popup-btn">
                                                    <button class="popup_cancel">Cancel</button>
                                                    <button class="popup-start">Start again</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="hit-container">
                <img src="img/hit-big.png" />
                <p>The Facial Assessment Scale assists you to develop a Holistic Individualised Treatment (HIT) plan
                    with your patient.
                </p>
                <a>Learn more about HITs here</a>
                <p>Galderma Australia Pty Ltd, Level 18, 1 Denison St, North Sydney, NSW, 2060. ABN 12 003 976 930.
                    Distributed in NZ by Healthcare Logistics, 58 Richard Pearse Drive, Airport Oaks, Mangere 2022, NZ.
                    Phone: 1800 144 944 (AUS), 0800 174 104 (NZ). Fax: +61 (2) 9986 1699. Dysport Sponsor: Ipsen Pty
                    Ltd, Level 2, Building 4, Brandon Office Park, 540 Springvale Road, Glen Waverley, Victoria 3150
                    Australia. Distributed by Galderma Australia Pty Ltd for the glabellar lines and lateral canthal
                    lines indications only. Dysport® is a registered trademark of Ipsen Pty Ltd. Restylane, Sculptra and
                    Galderma are registered trademarks of Galderma Holding S.A. ANZ-GAI-2200055. TAPS Approval No:
                    NP18772. December 2022.</p>
            </div>
        </div>
    </div>
    <div class="modal"></div>

    <script src="https://code.jquery.com/jquery-3.6.2.min.js"
        integrity="sha256-2krYZKh//PcchRtd+H+VyyQoZ/e3EcrkxhM8ycwASPA=" crossorigin="anonymous"></script>
    <script src="script/modal.js"></script>
    <!-- <script src="script/html2canvas.js"></script>
    <script src="script/jspdf.umd.js"></script> -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>

    <script>
        $(".popup-start").click(function () {
            window.scrollTo(0, 0);
            location.reload();
        });
        window.jsPDF = window.jspdf.jsPDF;

        function downloadPDF() {
            $('.ignore').hide();
            $('.patient-notes span').addClass('displayBlock');
            $('.patient-notes textarea').hide();
            $('.facial-notes textarea').hide();
            $('.facial-notes textarea').next('span').show();
            $('.patient-notes span').text($('.patient-notes textarea').val());
            $(".facial-notes textarea").each(function (index) {
                const $row = $(this);
                let vl1 = $row.val()
                $row.next('span').text(vl1);
            });
            const data = document.getElementById('contentToPrint');
            $("body").addClass("loading");
            html2canvas(data).then((canvas) => {
                const imgWidth = 208;
                const pageHeight = 295;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                let heightLeft = imgHeight;
                let position = 0;
                heightLeft -= pageHeight;
                const doc = new jsPDF('p', 'mm');
                doc.addImage(canvas, 'PNG', 0, position, imgWidth, imgHeight, '', 'FAST');
                while (heightLeft >= 0) {
                    position = heightLeft - imgHeight;
                    doc.addPage();
                    doc.addImage(canvas, 'PNG', 0, position, imgWidth, imgHeight, '', 'FAST');
                    heightLeft -= pageHeight;
                }
                doc.save('Galderma Facial Assessment Scale – Treatment Plan');
                $("body").removeClass("loading");
                $('.facial-notes textarea').show();
                $('.patient-notes textarea').show();
                $('.patient-notes span').removeClass('displayBlock');
                $('.facial-notes textarea').next('span').hide();
                $('.facial-notes textarea').next('span').text('');
                $('.ignore').show();

            });
        }

        var eCanvasLines = [[[20, 25], [60, 25], [100, 25], [140, 25]], [[20, 95], [60, 95], [100, 95], [140, 95]]];

        var eCanvas = document.getElementById("evaluationCanvas");
        ectx = eCanvas.getContext('2d');

        ectx.font = "10px verdana, sans-serif ";
        ectx.fillStyle = "#000"
        ectx.fillText('Dehydration', 11, 10);
        ectx.fillText('Scars', 11, 77);

        drawArrow(ectx, 20, 25, 190, 25, 1, "#e4ddec")
        drawArrow(ectx, 20, 95, 190, 95, 1, "#e4ddec");

        /** First line circles*/

        ectx.beginPath();
        ectx.arc(20, 25, 7, 0, 2 * Math.PI);
        ectx.fillStyle = '#e0dcee';
        ectx.fill();
        ectx.stroke();
        ectx.font = "bold 10px verdana, sans-serif ";
        ectx.fillStyle = "#000"
        ectx.fillText('0', 16, 42);


        ectx.beginPath();
        ectx.arc(60, 25, 7, 0, 2 * Math.PI);
        ectx.fillStyle = '#e0dcee';
        ectx.fill();
        ectx.font = "bold 10px verdana, sans-serif ";
        ectx.fillStyle = "#000"
        ectx.fillText('1', 56, 42);
        ectx.stroke();


        ectx.beginPath();
        ectx.arc(100, 25, 7, 0, 2 * Math.PI);
        ectx.fillStyle = '#e0dcee';
        ectx.fill();
        ectx.font = "bold 10px verdana, sans-serif ";
        ectx.fillStyle = "#000"
        ectx.fillText('2', 96, 42);
        ectx.stroke();


        ectx.beginPath();
        ectx.arc(140, 25, 7, 0, 2 * Math.PI);
        ectx.fillStyle = '#e0dcee';
        ectx.fill();
        ectx.stroke();
        ectx.font = "bold 10px verdana, sans-serif ";
        ectx.fillStyle = "#000"
        ectx.fillText('3', 136, 42);

        /** Second line circles*/

        ectx.beginPath();
        ectx.arc(20, 95, 7, 0, 2 * Math.PI);
        ectx.fillStyle = '#e0dcee';
        ectx.fill();
        ectx.stroke();
        ectx.font = "bold 10px verdana, sans-serif ";
        ectx.fillStyle = "#000"
        ectx.fillText('0', 16, 95 + 12 + 5);

        ectx.beginPath();
        ectx.arc(60, 95, 7, 0, 2 * Math.PI);
        ectx.fillStyle = '#e0dcee';
        ectx.fill();
        ectx.stroke();
        ectx.font = "bold 10px verdana, sans-serif ";
        ectx.fillStyle = "#000"
        ectx.fillText('1', 56, 95 + 12 + 5);

        ectx.beginPath();
        ectx.arc(100, 95, 7, 0, 2 * Math.PI);
        ectx.fillStyle = '#e0dcee';
        ectx.fill();
        ectx.stroke();
        ectx.font = "bold 10px verdana, sans-serif ";
        ectx.fillStyle = "#000"
        ectx.fillText('2', 96, 95 + 12 + 5);

        ectx.beginPath();
        ectx.arc(140, 95, 7, 0, 2 * Math.PI);
        ectx.fillStyle = '#e0dcee';
        ectx.fill();
        ectx.stroke();
        ectx.font = "bold 10px verdana, sans-serif ";
        ectx.fillStyle = "#000"
        ectx.fillText('3', 136, 95 + 12 + 5);


        var squareSize = 500;
        var canvas = document.getElementById("myCanvas");
        canvas.width = squareSize;
        canvas.height = squareSize;
        var ctx = canvas.getContext("2d");
        var dotRadius = 8;
        var ctxCentreX = canvas.width / 2;
        var ctxCentreY = canvas.height / 2;

        var lines = [];

        var connectedIndex = {
            0: {
                idx: 0,
                pt: []
            },
            1: {
                idx: 0,
                pt: []
            },
            2: {
                idx: 0,
                pt: []
            },
            3: {
                idx: 0,
                pt: []
            },
            4: {
                idx: 0,
                pt: []
            },
            5: {
                idx: 0,
                pt: []
            },
            6: {
                idx: 0,
                pt: []
            },
            7: {
                idx: 0,
                pt: []
            }
        };

        var pieAngles = [{
            s: 277,
            e: 353,
            c: "#796aad"
        },
        {
            s: 07,
            e: 83,
            c: "#998dc3",
        },
        {
            s: 97,
            e: 128,
            c: "#ada2d0",
        },
        {
            s: 142,
            e: 173,
            c: "#ada2d0",
        },
        {
            s: 187,
            e: 263,
            c: "#c1badd",
        },
        ];

        var pieSliceRadius = [40, 80, 120, 160];
        var dotAngles = [295, 335, 25, 65, 113, 158, 205, 245];

        drawMyCircle();

        function drawMyCircle() {

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
            ctx.font = "500 11px Arial";
            createPie(ctx, ctxCentreX, ctxCentreY, pieAngles, 215, 240, false);
            createPie(ctx, ctxCentreX, ctxCentreY, pieAngles, 200, 215, true);
            createPie(ctx, ctxCentreX, ctxCentreY, pieAngles, 40, 200, false);

            createPieSlice(ctx, ctxCentreX, ctxCentreY, pieAngles, pieSliceRadius, "#f1edf5");

            ctx.beginPath();
            ctx.arc(ctxCentreX, ctxCentreY, 40, 0, 2 * Math.PI);
            ctx.fillStyle = "#FFFFFF";
            ctx.strokeStyle = "#FFFFFF";
            ctx.fill();
            ctx.stroke();


            for (var i = 0; i < dotAngles.length; i++) {
                ctx.beginPath();
                var point = getPoint(ctxCentreX, ctxCentreY, 40, toRadian(dotAngles[i]));
                var end = getPoint(ctxCentreX, ctxCentreY, 190, toRadian(dotAngles[i]));
                drawArrow(ctx, point[0], point[1], end[0], end[1], 1, "#e4ddec")
            }

            for (var i = 0; i < dotAngles.length; i++) {
                lines[i] = [];
                for (var j = 0; j < pieSliceRadius.length; j++) {
                    ctx.beginPath();
                    var point = getPoint(ctxCentreX, ctxCentreY, pieSliceRadius[j], toRadian(dotAngles[i]));
                    lines[i].push(point);
                    ctx.arc(point[0], point[1], dotRadius, 0, 2 * Math.PI);

                    var fillSty = (connectedIndex[i].idx == j && connectedIndex[i].pt.length) ? "#000000" : "#e0dcee";

                    ctx.strokeStyle = "#FFFFFF";
                    ctx.lineWidth = 2;
                    ctx.fillStyle = fillSty;
                    ctx.fill();
                    ctx.stroke();
                }
            }

            ctx.beginPath();

            var moveTo = false;
            var connectedVals = 0;
            for (var k = 0; k < 8; k++) {
                if (connectedIndex[k].pt.length) {
                    connectedVals += 1;
                    if (moveTo) {
                        ctx.lineTo(connectedIndex[k].pt[0], connectedIndex[k].pt[1]);
                    } else {
                        ctx.moveTo(connectedIndex[k].pt[0], connectedIndex[k].pt[1]);
                        moveTo = true;
                    }
                }
            }

            if (connectedVals == 8) {
                ctx.moveTo(connectedIndex[7].pt[0], connectedIndex[7].pt[1]);
                ctx.lineTo(connectedIndex[0].pt[0], connectedIndex[0].pt[1]);

            }
            ctx.strokeStyle = "#000000";
            ctx.stroke();
            ctx.strokeStyle = "#FFFFFF";
            ctx.beginPath();

            circleText(ctx, "Loss of Radiance/Glow", 250, 250, 204, toRadian(282), toRadian(312), true, "#000000");
            circleText(ctx, "Loss of Firmness", 250, 250, 204, toRadian(327), toRadian(347), true, "#000000");
            circleText(ctx, "Sagging", 250, 250, 210, toRadian(30), toRadian(40), false, "#000000");
            circleText(ctx, "Volume loss", 250, 250, 210, toRadian(73), toRadian(88), false, "#000000");
            circleText(ctx, "Imbalance", 250, 250, 210, toRadian(120), toRadian(135), false, "#000000");
            circleText(ctx, "Asymmetry", 250, 250, 210, toRadian(165), toRadian(180), false, "#000000");
            circleText(ctx, "Static lines", 250, 250, 204, toRadian(197), toRadian(213), true, "#000000");
            circleText(ctx, "Dynamic lines", 250, 250, 204, toRadian(235), toRadian(253), true, "#000000");

            ctx.strokeStyle = "#796aad";
            circleText(ctx, "Skin Quality", 250, 250, 225, toRadian(305), toRadian(325), true, "#e0dcee");
            ctx.strokeStyle = "#c1badd";
            circleText(ctx, "Expression", 250, 250, 225, toRadian(217), toRadian(235), true, "#e0dcee");
            ctx.strokeStyle = "#998dc3";
            circleText(ctx, "Facial Shape", 250, 250, 230, toRadian(55), toRadian(75), false, "#e0dcee");
            ctx.strokeStyle = "#ada2d0";
            circleText(ctx, "Proportions", 250, 250, 230, toRadian(107), toRadian(122), true, "#e0dcee");
            ctx.strokeStyle = "#ada2d0";
            circleText(ctx, "Symmetry", 250, 250, 230, toRadian(150), toRadian(165), true, "#e0dcee");
            ctx.strokeStyle = "#000000";
            //ctx.lineWidth = 3;
            ctx.fillStyle = "#000000";
            ctx.font = "500 12px Courier New";
            ctx.fillText("0", 288, 254);
            ctx.fillText("1", 328, 254);
            ctx.fillText("2", 368, 254);
            ctx.fillText("3", 408, 254);

            ctx.fillText("0", 204, 254);
            ctx.fillText("1", 164, 254);
            ctx.fillText("2", 124, 254);
            ctx.fillText("3", 84, 254);

            ctx.fillText("0", 246, 298);
            ctx.fillText("1", 246, 335);
            ctx.fillText("2", 246, 375);
            ctx.fillText("3", 246, 413);

            ctx.fillText("0", 246, 209);
            ctx.fillText("1", 246, 172);
            ctx.fillText("2", 246, 132);
            ctx.fillText("3", 246, 93);

        }

        eCanvas.addEventListener("click", function (event) {
            if (!eCanvasLines.length) {
                return;
            }
            for (var t = 0; t < eCanvasLines.length; t++) {
                for (var g = 0; g < eCanvasLines[t].length; g++) {
                    if (isPointInPatheCanvas(event, eCanvasLines[t][g][0], eCanvasLines[t][g][1])) {
                        ectx.fillStyle = '#000';
                        ectx.fill();
                    }
                }
            }

        });

        canvas.addEventListener("click", function (event) {
            if (!lines.length) {
                return;
            }
            console.log(lines);
            for (var t = 0; t < lines.length; t++) {
                if (lines[t].length) {
                    for (var g = 0; g < lines[t].length; g++) {
                        if (isPointInPath(event, lines[t][g][0], lines[t][g][1])) {

                            if (t == 0) {
                                connectedIndex = {
                                    0: {
                                        idx: 0,
                                        pt: []
                                    },
                                    1: {
                                        idx: 0,
                                        pt: []
                                    },
                                    2: {
                                        idx: 0,
                                        pt: []
                                    },
                                    3: {
                                        idx: 0,
                                        pt: []
                                    },
                                    4: {
                                        idx: 0,
                                        pt: []
                                    },
                                    5: {
                                        idx: 0,
                                        pt: []
                                    },
                                    6: {
                                        idx: 0,
                                        pt: []
                                    },
                                    7: {
                                        idx: 0,
                                        pt: []
                                    }
                                };
                            }

                            if (t == 0 || connectedIndex[t - 1].pt.length) {
                                connectedIndex[t].pt = lines[t][g];
                                connectedIndex[t].idx = g;
                                drawMyCircle();
                            }
                            else {
                                alert('Please start at skin quality and work clockwise')
                            }
                        }
                    }
                }
            }


        });


        function createPieSlice(ctx, centreX, centreY, pieAngles, sliceRadiusList, strokeColor) {
            for (var angle of pieAngles) {
                for (var sliceRadius of sliceRadiusList) {
                    ctx.beginPath();
                    ctx.setLineDash([2, 4]);
                    ctx.arc(centreX, centreY, sliceRadius, toRadian(angle.s), toRadian(angle.e));
                    ctx.strokeStyle = strokeColor;
                    ctx.stroke();
                }
            }
            ctx.setLineDash([0, 0]);
        }

        function createPie(ctx, centreX, centreY, angles, startRadius, endRadius, fillWhite) {

            for (var i = 0; i < angles.length; i++) {

                ctx.beginPath();
                ctx.arc(centreX, centreY, endRadius, toRadian(angles[i].s), toRadian(angles[i].e));
                ctx.fillStyle = (fillWhite) ? "#FFFFFF" : angles[i].c;
                ctx.strokeStyle = "#FFFFFF";
                ctx.fill();
                ctx.stroke();
                ctx.beginPath();
                ctx.arc(ctxCentreX, ctxCentreY, startRadius, toRadian(angles[i].s), toRadian(angles[i].e));


                var p1 = getPoint(ctxCentreX, ctxCentreY, endRadius, toRadian(angles[i].s));
                var p2 = getPoint(ctxCentreX, ctxCentreY, startRadius, toRadian(angles[i].s));

                var p3 = getPoint(ctxCentreX, ctxCentreY, endRadius, toRadian(angles[i].e));
                var p4 = getPoint(ctxCentreX, ctxCentreY, startRadius, toRadian(angles[i].e));

                ctx.moveTo(p1[0], p1[1]);
                ctx.lineTo(p2[0], p2[1]);
                ctx.moveTo(p3[0], p3[1]);
                ctx.lineTo(p4[0], p4[1]);
                ctx.stroke();

                let region = new Path2D();

                region.moveTo(p1[0], p1[1]);
                region.lineTo(p2[0], p2[1]);

                region.lineTo(p4[0], p4[1]);

                region.lineTo(p3[0], p3[1]);

                region.lineTo(p1[0], p1[1]);

                region.closePath();

                ctx.fillStyle = (fillWhite) ? "#FFFFFF" : angles[i].c;
                ctx.strokeStyle = "#FFFFFF";
                ctx.fill(region);

            }
        }

        function isPointInPath(evt, cx, cy) {

            var x = evt.pageX - canvas.offsetLeft;
            var y = evt.pageY - canvas.offsetTop;
            if (Math.pow(x - cx, 2) + Math.pow(y - cy, 2) < Math.pow(10, 2)) {
                return true;
            } else {
                return false;
            }
        }

        function isPointInPatheCanvas(evt, cx, cy) {

            var x = evt.pageX - eCanvas.offsetLeft;
            var y = evt.pageY - eCanvas.offsetTop;
            if (Math.pow(x - cx, 2) + Math.pow(y - cy, 2) < Math.pow(10, 2)) {
                return true;
            } else {
                return false;
            }
        }

        function getPoint(c1, c2, radius, angle) {
            return [c1 + Math.cos(angle) * radius, c2 + Math.sin(angle) * radius];
        }

        function toRadian(angle) {
            return angle * 0.0174533;
        }

        function drawArrow(ctx, fromx, fromy, tox, toy, arrowWidth, color) {
            //variables to be used when creating the arrow
            var headlen = 10;
            var angle = Math.atan2(toy - fromy, tox - fromx);

            ctx.save();
            ctx.strokeStyle = color;

            //starting path of the arrow from the start square to the end square
            //and drawing the stroke
            ctx.beginPath();
            ctx.moveTo(fromx, fromy);
            ctx.lineTo(tox, toy);
            ctx.lineWidth = arrowWidth;
            ctx.stroke();

            //starting a new path from the head of the arrow to one of the sides of
            //the point
            ctx.beginPath();
            ctx.moveTo(tox, toy);
            ctx.lineTo(tox - headlen * Math.cos(angle - Math.PI / 7),
                toy - headlen * Math.sin(angle - Math.PI / 7));

            //path from the side point of the arrow, to the other side point
            ctx.lineTo(tox - headlen * Math.cos(angle + Math.PI / 7),
                toy - headlen * Math.sin(angle + Math.PI / 7));

            //path from the side point back to the tip of the arrow, and then
            //again to the opposite side point
            ctx.lineTo(tox, toy);
            ctx.lineTo(tox - headlen * Math.cos(angle - Math.PI / 7),
                toy - headlen * Math.sin(angle - Math.PI / 7));

            //draws the paths created above
            ctx.stroke();
            ctx.fill();
            ctx.restore();
        }


        function circleText(ctx, text, x, y, radius, start, end, direction, textColor) {
            var i, textWidth, pA, pAS, a, aw, wScale, aligned, dir;
            // save the current textAlign so that it can be restored at end
            aligned = ctx.textAlign;

            dir = direction ? 1 : -1;
            // get the angular size of a pixel in radians
            pAS = 1 / radius;

            // get the width of all the text
            textWidth = ctx.measureText(text).width;

            // if end is supplied then fit text between start and end
            if (end !== undefined) {
                pA = ((end - start) / textWidth) * dir;
                wScale = (pA / pAS) * dir;
            } else { // if no end is supplied corret start and end for alignment
                pA = -pAS * dir;
                wScale = -1 * dir;
                switch (aligned) {
                    case "center": // if centered move around half width
                        start -= pA * (textWidth / 2);
                        end = start + pA * textWidth;
                        break;
                    case "right":
                        end = start;
                        start -= pA * textWidth;
                        break;
                    case "left":
                        end = start + pA * textWidth;
                }
            }

            // some code to help me test. Left it here incase someone wants to underline
            // rmove the following 3 lines if you dont need underline
            ctx.beginPath();
            ctx.arc(x, y, radius, end, start, end > start ? true : false);
            ctx.stroke();

            ctx.textAlign = "center"; // align for rendering

            a = start; // set the start angle
            for (var i = 0; i < text.length; i += 1) { // for each character
                // get the angular width of the text
                aw = ctx.measureText(text[i]).width * pA;
                var xDx = Math.cos(a + aw / 2); // get the yAxies vector from the center x,y out
                var xDy = Math.sin(a + aw / 2);
                if (xDy < 0) { // is the text upside down. If it is flip it
                    // sets the transform for each character scaling width if needed
                    ctx.setTransform(-xDy * wScale, xDx * wScale, -xDx, -xDy, xDx * radius + x, xDy * radius + y);
                } else {
                    ctx.setTransform(-xDy * wScale, xDx * wScale, xDx, xDy, xDx * radius + x, xDy * radius + y);
                }
                // render the character
                ctx.fillStyle = textColor;
                ctx.fillText(text[i], 0, 0);

                a += aw;

            }
            ctx.setTransform(1, 0, 0, 1, 0, 0);
            ctx.textAlign = aligned;

        }

    </script>
</body>

</html>